<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>URL functions - Compile URLs in columns, for EJAM — url_columns_bysite • EJAM</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="URL functions - Compile URLs in columns, for EJAM — url_columns_bysite"><meta name="description" content="URL functions - Compile URLs in columns, for EJAM"><meta property="og:description" content="URL functions - Compile URLs in columns, for EJAM"><meta property="og:image" content="https://ejanalysis.github.io/EJAM/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/whatis.html">What is EJAM?</a></li>
    <li><a class="dropdown-item" href="../articles/webapp.html">Accessing the Web App</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/basics.html">Basics - Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing.html">Using EJAM for Analysis in R</a></li>
    <li><a class="dropdown-item" href="../articles/testdata.html">Examples of Input/Output Files &amp; Data</a></li>
    <li><a class="dropdown-item" href="../articles/distances.html">Comparing Distances (Choosing a Radius)</a></li>
    <li><a class="dropdown-item" href="../articles/naics.html">NAICS (Industries)</a></li>
    <li><a class="dropdown-item" href="../articles/zipcodes.html">Zipcodes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For package/app developers</h6></li>
    <li><a class="dropdown-item" href="../articles/dev-app-settings.html">Defaults and Custom Settings for the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev-deploy-app.html">Deploying the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev-run-shinytests.html">Testing EJAM App with shinytest2</a></li>
    <li><a class="dropdown-item" href="../articles/dev-run-unit-tests.html">Testing EJAM Functions with Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/dev-update-datasets.html">Updating EJAM Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/dev-update-documentation.html">Updating Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/dev-update-package.html">Updating the Package as a New Release</a></li>
    <li><a class="dropdown-item" href="../articles/dev-future-plans.html">Future Plans and Ideas for EJAM</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ejanalysis/EJAM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>URL functions - Compile URLs in columns, for EJAM</h1>
      <small class="dont-index">Source: <a href="https://github.com/ejanalysis/EJAM/blob/main/R/url_columns_bysite.R" class="external-link"><code>R/url_columns_bysite.R</code></a></small>
      <div class="d-none name"><code>url_columns_bysite.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>URL functions - Compile URLs in columns, for EJAM</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">url_columns_bysite</span><span class="op">(</span></span>
<span>  sitepoints <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lon <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  shapefile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fips <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wherestr <span class="op">=</span> <span class="st">""</span>,</span>
<span>  namestr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  radius <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reports <span class="op">=</span> <span class="fu">EJAM</span><span class="fu">:::</span><span class="fu"><a href="global_or_param.html">global_or_param</a></span><span class="op">(</span><span class="st">"default_reports"</span><span class="op">)</span>,</span>
<span>  sitetype <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as_html <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  validate_regids <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sitepoints">sitepoints<a class="anchor" aria-label="anchor" href="#arg-sitepoints"></a></dt>
<dd><p>data.frame or data.table with lat and lon columns
(and should have ejam_uniq_id column or assume 1 output row per input row, same order)</p></dd>


<dt id="arg-lat-lon">lat, lon<a class="anchor" aria-label="anchor" href="#arg-lat-lon"></a></dt>
<dd><p>if sitepoints NULL/missing, vectors of latitudes and longitudes
(assumes ejam_uniq_id is not available and treats output as 1 per input same order)</p></dd>


<dt id="arg-shapefile">shapefile<a class="anchor" aria-label="anchor" href="#arg-shapefile"></a></dt>
<dd><p>spatial data.frame, class sf, see ejamit() parameter of same name.
(and should have ejam_uniq_id column or assume 1 output row per input row, same order)</p></dd>


<dt id="arg-fips">fips<a class="anchor" aria-label="anchor" href="#arg-fips"></a></dt>
<dd><p>vector of FIPS codes if relevant  (instead of sitepoints or shapefile input)
Note that nearly half of all county fips codes are impossible to distinguish from
5-digit zipcodes because the same numbers are used for both purposes.</p></dd>


<dt id="arg-wherestr">wherestr<a class="anchor" aria-label="anchor" href="#arg-wherestr"></a></dt>
<dd><p>optional because inferred from fips if provided.
Passed to <code><a href="url_ejscreenmap.html">url_ejscreenmap()</a></code> and can be name of city, county, state like
from fips2name(201090), or "new rochelle, ny" or "AK"
or even a zip code, but NOT a fips code! (for FIPS, use the fips parameter instead).
Note that nearly half of all county fips codes are impossible to distinguish from
5-digit zipcodes because the same numbers are used for both purposes.</p></dd>


<dt id="arg-namestr">namestr<a class="anchor" aria-label="anchor" href="#arg-namestr"></a></dt>
<dd><p>no longer used - had been passed to <code><a href="url_ejscreen_report.html">url_ejscreen_report()</a></code></p></dd>


<dt id="arg-regid">regid<a class="anchor" aria-label="anchor" href="#arg-regid"></a></dt>
<dd><p>optional vector of FRS registry IDs if available to use to create links
to detailed ECHO facility reports</p></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p>vector of values for radius in miles</p></dd>


<dt id="arg-reports">reports<a class="anchor" aria-label="anchor" href="#arg-reports"></a></dt>
<dd><p>optional list of lists specifying which report types to include –
see the file "global_defaults_package.R" or source code for this function for how this is defined.</p></dd>


<dt id="arg-sitetype">sitetype<a class="anchor" aria-label="anchor" href="#arg-sitetype"></a></dt>
<dd><p>optional "latlon" or "shp" or "fips" but can be inferred from other params</p></dd>


<dt id="arg-as-html">as_html<a class="anchor" aria-label="anchor" href="#arg-as-html"></a></dt>
<dd><p>Whether to return as just the urls or as html hyperlinks to use in a DT::datatable() for example
passed to <code><a href="url_ejamapi.html">url_ejamapi()</a></code>, <code><a href="url_ejscreenmap.html">url_ejscreenmap()</a></code>, or other url_xyz report functions.</p></dd>


<dt id="arg-validate-regids">validate_regids<a class="anchor" aria-label="anchor" href="#arg-validate-regids"></a></dt>
<dd><p>if set TRUE, returns NA where a regid is not found in the FRS dataset that is
currently being used by this package (which might not be the very latest from EPA).
If set FALSE, faster since avoids checking but some links might not work and not warn about bad regid values.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>passed to each function, and can be any parameter that any of them uses</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>list of data.frames to append to the list of data.frames created by
<code><a href="ejamit.html">ejamit()</a></code> or <code><a href="doaggregate.html">doaggregate()</a></code>,</p>
<p><code>list(results_bysite = results_bysite, </code>
<code>    results_overall = results_overall,</code>
<code>      newcolnames=newcolnames)</code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>used in <code><a href="table_xls_format.html">table_xls_format()</a></code>, and server, to create hyperlinks to reports or webpages, one per site</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="url_ejscreen_report.html">url_ejscreen_report()</a></code> <code><a href="url_ejscreenmap.html">url_ejscreenmap()</a></code> <code><a href="url_echo_facility.html">url_echo_facility()</a></code> <code><a href="url_ejscreenapi_clusters_and_sort_cols.html">url_ejscreenapi_clusters_and_sort_cols()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">=</span>  <span class="fu">url_columns_bysite</span><span class="op">(</span><span class="va">testpoints_10</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span>, radius <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in url_columns_bysite(testpoints_10[1:2, ], radius = 1):</span> could not find function "url_columns_bysite"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">=</span>  <span class="fu">url_columns_bysite</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lat<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, lon<span class="op">=</span><span class="fl">101</span><span class="op">:</span><span class="fl">102</span><span class="op">)</span>, radius <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  INFO_FOR_SITE2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"site2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Place1info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"North"</span>, <span class="st">""</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  keylist_bysite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>newkey_all_sites <span class="op">=</span> <span class="st">"YES"</span>,</span></span>
<span class="r-in"><span>                        site_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NRO"</span>, <span class="st">"CRS"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in url_columns_bysite(data.frame(lat = 1:2, lon = 101:102), radius = 1,     INFO_FOR_SITE2 = c(NA, "site2"), Place1info = c("North",         ""), keylist_bysite = list(newkey_all_sites = "YES",         site_name = c("NRO", "CRS"))):</span> could not find function "url_columns_bysite"</span>
<span class="r-in"><span><span class="fu">unlinkify</span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in unlinkify(x[[2]]):</span> could not find function "unlinkify"</span>
<span class="r-in"><span><span class="va">x</span> <span class="op">=</span> <span class="va">x</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'x' not found</span>
<span class="r-in"><span><span class="va">x</span> <span class="op">=</span> <span class="va">x</span><span class="op">[</span>, <span class="st">"EJAM Report"</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'x' not found</span>
<span class="r-in"><span><span class="fu">unlinkify</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in unlinkify(x):</span> could not find function "unlinkify"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>September 2025</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.6</p>
</div>

    </footer></div>





  </body></html>

