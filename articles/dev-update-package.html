<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Updating the Package as a New Release • EJAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Updating the Package as a New Release">
<meta name="description" content="Steps for incrementing package version and GitHub releases">
<meta property="og:description" content="Steps for incrementing package version and GitHub releases">
<meta property="og:image" content="https://ejanalysis.github.io/EJAM/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.6.002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/whatis.html">What is EJAM?</a></li>
    <li><a class="dropdown-item" href="../articles/webapp.html">Accessing the Web App</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/basics.html">Basics - Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing.html">Using EJAM for Analysis in R</a></li>
    <li><a class="dropdown-item" href="../articles/testdata.html">Examples of Input/Output Files &amp; Data</a></li>
    <li><a class="dropdown-item" href="../articles/distances.html">Comparing Distances (Choosing a Radius)</a></li>
    <li><a class="dropdown-item" href="../articles/naics.html">NAICS (Industries)</a></li>
    <li><a class="dropdown-item" href="../articles/counties.html">Counties</a></li>
    <li><a class="dropdown-item" href="../articles/zipcodes.html">Zipcodes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For package/app developers</h6></li>
    <li><a class="dropdown-item" href="../articles/dev-app-settings.html">Defaults and Custom Settings for the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev-deploy-app.html">Deploying the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev-run-shinytests.html">Testing EJAM App with shinytest2</a></li>
    <li><a class="dropdown-item" href="../articles/dev-run-unit-tests.html">Testing EJAM Functions with Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/dev-update-datasets.html">Updating EJAM Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/dev-update-documentation.html">Updating Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/dev-update-package.html">Updating the Package as a New Release</a></li>
    <li><a class="dropdown-item" href="../articles/dev-future-plans.html">Future Plans and Ideas for EJAM</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ejanalysis/EJAM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Updating the Package as a New Release</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ejanalysis/EJAM/blob/main/vignettes/dev-update-package.Rmd" class="external-link"><code>vignettes/dev-update-package.Rmd</code></a></small>
      <div class="d-none name"><code>dev-update-package.Rmd</code></div>
    </div>

    
    
<p>This document outlines the general development process for updating
EJAM (for a new release of the package) or relocating it to a different
repository (repo name and/or github user name), or changing the full
name of the tool. Also see the separate vignettes on <a href="dev-update-datasets.html">updating datasets</a> and <a href="dev-update-documentation.html">updating documentation</a>.</p>
<div class="section level2">
<h2 id="if-relevant-carefully-change-owners-and-names-of-github-repositories">If relevant, carefully change owners and names of github
repositories<a class="anchor" aria-label="anchor" href="#if-relevant-carefully-change-owners-and-names-of-github-repositories"></a>
</h2>
<ul>
<li><p>The full name/title of the web tool is used in several places and
all of those should be reading the full name from where it is defined.
The app title is stored in the DESCRIPTION file, and is available for
vignettes, functions, etc. directly via
<code>as.vector(desc::desc_get("Title"))</code>. After the package is
attached, the name as potentially modified via global_defaults_package.R
or parameters to <code><a href="../reference/ejamapp.html">ejamapp()</a></code> is available as
<code>EJAM:::global_or_param(".app_title")</code></p></li>
<li><p>The name of the <em>package</em> (e.g., “EJAM”) is assumed to be
the same as the name of the github <em>repository</em>, and there are
many places where the package name is mentioned in vignettes/ articles,
etc. Changing just the repo name is feasible, as described here, but you
would have to be careful about this distinction. You would have to
globally find in files all hardcoded references to the old names, urls,
etc. since there still are places where it does not check in DESCRIPTION
for the repo name or assumes repo and package names are
identical.</p></li>
</ul>
<p>If the package were renamed or relocated (if a new name were used for
the repository or the owner of the repository changed, or the location
of the data repository changed), several files would need to be updated
for everything to work correctly:</p>
<ul>
<li><p>The name of the github repository storing the package code must
be recorded as part of the URL parameter in the DESCRIPTION file in the
root folder of the source package.</p></li>
<li><p>The name of the repo (or other domain) where webpages of package
documentation are published also must be recorded as part of the URL
parameter in the DESCRIPTION file in the root folder of the source
package. The website providing documentation of the R package is created
via <code><a href="../reference/pkgdown_update.html">pkgdown_update()</a></code>, as explained in <a href="dev-update-documentation.html">updating
documentation</a>.</p></li>
<li><p>The name of the repo where datasets are stored must be recorded
as the ejam_data_repo parameter in the DESCRIPTION file in the root
folder of the source package.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="update-the-package-release">Update the package release<a class="anchor" aria-label="anchor" href="#update-the-package-release"></a>
</h2>
<ul>
<li><p>Update EJAM version number in <em>DESCRIPTION</em> in development
branch (e.g. to 2.4.1) (&amp; tying it to EJSCREEN version numbers if
relevant). Search in files globally too, as there still are places where
the version number is not read from DESCRIPTION, like the files
*_pkgdown.yml* and <em>golem-config.yml</em> and <em>CITATION.cff</em>
where the version must be updated too!</p></li>
<li><p>Update <code>NEWS.md</code> in development branch listing changes
made. Use the numbering x.y.z (same numbering as was put in
DESCRIPTION).</p></li>
<li><p>Merge development into main branch</p></li>
<li><p>Update the EJAM release/ create a new release on github.com,
using the <code>NEWS.md</code> as the changelog, creating a new tag like
“v2.32.N”.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="update-the-test-installation-script">Update the test installation script<a class="anchor" aria-label="anchor" href="#update-the-test-installation-script"></a>
</h2>
<p>You may want to update the test script.</p>
<ul>
<li>Remove older versions of R from the testing and add more recent
ones</li>
<li>Add new system libraries required by newly added packages
(e.g. certain libraries need for installation on Ubuntu)</li>
</ul>
</div>
<div class="section level2">
<h2 id="test-the-installation-process">Test the installation process<a class="anchor" aria-label="anchor" href="#test-the-installation-process"></a>
</h2>
<p>To ensure that, after changes are made, the package can still be
installed by users with various operating systems and versions of R, a
workflow file,
<code>.github/workflows/test-ability-to-install.yml</code>, is triggered
by any push to the main branch. This file tests installation with the
following matrix of options:</p>
<ol style="list-style-type: decimal">
<li><p><strong>OS</strong>: Latest Ubuntu, Windows, macOS</p></li>
<li><p><strong>R version</strong>: latest release and some prior
versions</p></li>
<li><p><strong>Using install_url() versus install_github()</strong>:
<code><a href="https://remotes.r-lib.org/reference/install_url.html" class="external-link">remotes::install_url()</a></code> and
<code><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">remotes::install_github()</a></code></p></li>
</ol>
<p>But also note users may need to set up a personal access token (PAT)
if they want to install from github - <a href="installing.html">see
article on installing for info on setting up a PAT</a>.</p>
</div>
<div class="section level2">
<h2 id="obsolete-step-make-updates-public-before-a-new-release-from-when-a-nonpublic-repo-was-used-for-development-at-epa">obsolete step: Make updates public before a new release (from when a
nonpublic repo was used for development at EPA)<a class="anchor" aria-label="anchor" href="#obsolete-step-make-updates-public-before-a-new-release-from-when-a-nonpublic-repo-was-used-for-development-at-epa"></a>
</h2>
<p>If the development repo being used is internal or private, not
public, then to make the package installable, the updates need to be
pushed to a public repo. These would be the steps:</p>
<ol style="list-style-type: decimal">
<li>If not already done, add ejanalysis/EJAM (or the appropriate public
repo) as a remote for the internal repo main branch:</li>
</ol>
<p><code>git remote add EJAM git@github.com:ejanalysis/EJAM.git</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Push to the main branch of that public repo:</li>
</ol>
<p><code>git push EJAM main:main</code></p>
<ol start="3" style="list-style-type: decimal">
<li>
<p>If you want to squash commits</p>
<ol style="list-style-type: lower-alpha">
<li>If you want to add a new squash commit, do this from main in the
internal repo:</li>
</ol>
</li>
</ol>
<p><code>git checkout -b squash-temp</code>
<code>git reset --soft #SHA OF PREVIOUS MAIN COMMIT</code>
<code>git commit -m "Creating squashed commit"</code>
<code>git push --force EJAM squash-temp:main</code></p>
<pre><code>b.  If you just want EJAM to end with a single squash commit, do this from main in the internal repo:</code></pre>
<p><code>git checkout –orphan squash-temp</code> <code>git add .</code>
<code>git commit -m "Publishing to public repo"</code>
<code>git push --force EJAM squash-temp:main</code>
<code>git -M main</code></p>
<ol start="4" style="list-style-type: decimal">
<li>Update EJAM release using a similar process as updating an internal
repo release.</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>October 2025</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.6.002</p>
</div>

    </footer>
</div>





  </body>
</html>
